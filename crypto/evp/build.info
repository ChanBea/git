$GOAL=../../libcrypto
LIBS=$GOAL
$COMMON=digest.c evp_enc.c evp_lib.c evp_fetch.c cmeth_lib.c evp_utils.c \
        mac_lib.c mac_meth.c keymgmt_meth.c keymgmt_lib.c kdf_lib.c kdf_meth.c \
        m_sigver.c
SOURCE[$GOAL]=$COMMON\
        encode.c evp_key.c evp_cnf.c names.c \
        p_open.c p_seal.c p_sign.c p_verify.c p_lib.c p_enc.c p_dec.c \
        bio_md.c bio_b64.c bio_enc.c evp_err.c \
        c_allc.c c_alld.c bio_ok.c \
        evp_pkey.c evp_pbe.c p5_crpt.c p5_crpt2.c pbe_scrypt.c \
        pkey_kdf.c \
        pmeth_lib.c pmeth_fn.c pmeth_gn.c \
        pkey_mac.c exchange.c \
        legacy_md_null.c legacy_cipher_null.c legacy_old.c \
        legacy_aes.c legacy_sha.c \
        legacy_aes_cbc_hmac_sha1.c legacy_aes_cbc_hmac_sha256.c

SOURCE[../../providers/libfips.a]=$COMMON

IF[{- !$disabled{aria} -}]
  SOURCE[$GOAL]=legacy_aria.c
  INCLUDE[legacy_aria.o]=.. ../modes
ENDIF

IF[{- !$disabled{bf} -}]
  SOURCE[$GOAL]=legacy_bf.c
ENDIF

IF[{- !$disabled{blake2} -}]
  SOURCE[$GOAL]=legacy_blake2.c
ENDIF

IF[{- !$disabled{camellia} -}]
  SOURCE[$GOAL]=legacy_camellia.c
  INCLUDE[legacy_camellia.o]=.. ../modes
ENDIF

IF[{- !$disabled{cast} -}]
  SOURCE[$GOAL]=legacy_cast.c
ENDIF

IF[{- !$disabled{chacha} -}]
  SOURCE[$GOAL]=legacy_chacha20.c
  IF[{- !$disabled{poly1305} -}]
    SOURCE[$GOAL]=legacy_chacha20_poly1305.c
  ENDIF
ENDIF

IF[{- !$disabled{des} -}]
  SOURCE[$GOAL]=legacy_des.c legacy_des2.c legacy_des3.c legacy_desx.c
  INCLUDE[legacy_des.o]=..
  INCLUDE[legacy_des2.o]=..
  INCLUDE[legacy_des3.o]=..
ENDIF

IF[{- !$disabled{idea} -}]
  SOURCE[$GOAL]=legacy_idea.c
ENDIF

IF[{- !$disabled{md2} -}]
  SOURCE[$GOAL]=legacy_md2.c
ENDIF
IF[{- !$disabled{md4} -}]
  SOURCE[$GOAL]=legacy_md4.c
ENDIF
IF[{- !$disabled{md5} -}]
  SOURCE[$GOAL]=legacy_md5.c legacy_md5_sha1.c
ENDIF
IF[{- !$disabled{mdc2} -}]
  SOURCE[$GOAL]=legacy_mdc2.c
ENDIF

IF[{- !$disabled{rmd160} -}]
  SOURCE[$GOAL]=legacy_ripemd.c
ENDIF

IF[{- !$disabled{rc2} -}]
  SOURCE[$GOAL]=legacy_rc2.c
ENDIF

IF[{- !$disabled{rc4} -}]
  SOURCE[$GOAL]=legacy_rc4.c
  IF[{- !$disabled{md5} -}]
    SOURCE[$GOAL]=legacy_rc4_hmac_md5.c
  ENDIF
ENDIF

IF[{- !$disabled{rc5} -}]
  SOURCE[$GOAL]=legacy_rc5.c
ENDIF

IF[{- !$disabled{seed} -}]
  SOURCE[$GOAL]=legacy_seed.c
ENDIF

IF[{- !$disabled{sm4} -}]
  SOURCE[$GOAL]=legacy_sm4.c
  INCLUDE[legacy_sm4.o]=.. ../modes
ENDIF

IF[{- !$disabled{whirlpool} -}]
  SOURCE[$GOAL]=legacy_wp.c
ENDIF

INCLUDE[legacy_aes.o]=.. ../modes
INCLUDE[legacy_aes_cbc_hmac_sha1.o]=../modes
INCLUDE[legacy_aes_cbc_hmac_sha256.o]=../modes

